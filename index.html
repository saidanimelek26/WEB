<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WebADB Pro GUI</title>
  <!-- ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ CDN ÿ£ŸÉÿ´ÿ± ŸÖŸàÿ´ŸàŸÇŸäÿ© ŸÑŸÖŸÉÿ™ÿ®ÿßÿ™ React -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/webadb/webadb.js@master/dist/webadb.js"></script>
  <!-- ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Tailwind CSS ÿπÿ®ÿ± CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #10b981;
      --dark-bg: #1f2937;
      --darker-bg: #111827;
      --light-bg: #f9fafb;
      --lighter-bg: #ffffff;
      --text-dark: #1f2937;
      --text-light: #f9fafb;
      --border-dark: #374151;
      --border-light: #e5e7eb;
    }

    body {
      transition: all 0.3s ease;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(15px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.03); }
    }
    
    .animate-fadeIn {
      animation: fadeIn 0.5s ease-out;
    }
    
    .animate-pulse {
      animation: pulse 2s infinite;
    }
    
    .window {
      resize: both;
      overflow: auto;
      min-width: 500px;
      min-height: 600px;
      max-width: 90vw;
      max-height: 85vh;
      background: var(--lighter-bg);
      border: 1px solid var(--border-light);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      border-radius: 12px;
    }
    
    .dark .window {
      background: var(--darker-bg);
      border: 1px solid var(--border-dark);
    }
    
    .draggable-header {
      cursor: move;
      user-select: none;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      border-top-left-radius: 12px;
      border-top-right-radius: 12px;
    }
    
    .scrollbar-custom::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    .scrollbar-custom::-webkit-scrollbar-track {
      background: rgba(229, 231, 235, 0.4);
      border-radius: 4px;
    }
    
    .scrollbar-custom::-webkit-scrollbar-thumb {
      background: rgba(107, 114, 128, 0.6);
      border-radius: 4px;
    }
    
    .scrollbar-custom::-webkit-scrollbar-thumb:hover {
      background: rgba(75, 85, 99, 0.8);
    }
    
    .dark .scrollbar-custom::-webkit-scrollbar-track {
      background: rgba(31, 41, 55, 0.4);
    }
    
    .dark .scrollbar-custom::-webkit-scrollbar-thumb {
      background: rgba(156, 163, 175, 0.6);
    }
    
    .dark .scrollbar-custom::-webkit-scrollbar-thumb:hover {
      background: rgba(209, 213, 219, 0.8);
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.7);
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(8px);
    }
    
    .dark .glass-effect {
      background: rgba(31, 41, 55, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--primary), var(--primary-dark));
      color: white;
      transition: all 0.2s ease;
    }
    
    .btn-primary:hover:not(:disabled) {
      background: linear-gradient(135deg, var(--primary-dark), #4338ca);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(79, 70, 229, 0.4);
    }
    
    .btn-success {
      background: linear-gradient(135deg, var(--secondary), #059669);
      color: white;
      transition: all 0.2s ease;
    }
    
    .btn-success:hover:not(:disabled) {
      background: linear-gradient(135deg, #059669, #047857);
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(16, 185, 129, 0.4);
    }
    
    .status-connected {
      color: var(--secondary);
      font-weight: 600;
    }
    
    .status-disconnected {
      color: #ef4444;
      font-weight: 600;
    }
    
    .output-terminal {
      background: var(--dark-bg);
      color: var(--text-light);
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      border-radius: 8px;
      padding: 1rem;
      height: 220px;
      overflow: auto;
    }
    
    .history-panel {
      max-height: 120px;
      overflow-y: auto;
    }
    
    .tab-active {
      border-bottom: 2px solid var(--primary);
      color: var(--primary);
      font-weight: 600;
    }
    
    .dark .tab-active {
      color: var(--primary-dark);
      border-bottom: 2px solid var(--primary-dark);
    }

    .loading-spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid var(--primary);
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 1s linear infinite;
      display: inline-block;
      margin-right: 8px;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-900 dark:via-indigo-900 dark:to-purple-900 transition-colors duration-300 min-h-screen">
  <div id="root" class="min-h-screen flex items-center justify-center p-4">
    <div class="window animate-fadeIn">
      <div class="draggable-header p-4 flex justify-between items-center">
        <div class="flex items-center space-x-2">
          <div class="w-6 h-6 rounded-full bg-white/20 flex items-center justify-center">üîß</div>
          <span class="font-bold text-lg text-white">WebADB Pro</span>
        </div>
        <div class="flex items-center space-x-3">
          <button id="theme-toggle" class="p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-all duration-300 text-white" title="Toggle dark mode">
            üåô
          </button>
        </div>
      </div>
      
      <div class="p-6 flex flex-col h-full">
        <div class="flex justify-between items-center mb-6">
          <button id="connect-btn" class="px-6 py-3 rounded-lg font-semibold transition-all duration-300 btn-primary">
            <span id="connect-text">Connect Device</span>
          </button>
          <div class="flex items-center">
            <div id="status-indicator" class="w-3 h-3 rounded-full mr-2 bg-red-500"></div>
            <span id="status-text" class="text-lg font-medium status-disconnected">Status: Disconnected</span>
          </div>
        </div>
        
        <div id="error-container" class="mb-6 hidden">
          <div class="p-3 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg">
            <p id="error-text" class="text-red-700 dark:text-red-300"></p>
          </div>
        </div>
        
        <div class="mb-6 flex border-b border-gray-200 dark:border-gray-700">
          <button data-tab="info" class="tab-button px-4 py-2 font-medium tab-active">Device Info</button>
          <button data-tab="shell" class="tab-button px-4 py-2 font-medium text-gray-500 dark:text-gray-400">Shell</button>
          <button data-tab="files" class="tab-button px-4 py-2 font-medium text-gray-500 dark:text-gray-400">File Manager</button>
        </div>
        
        <div id="tab-content">
          <div data-tab-content="info" class="tab-content active">
            <div class="mb-6">
              <button id="read-info-btn" class="w-full px-6 py-4 glass-effect rounded-lg text-lg font-semibold text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-all duration-300 opacity-50 cursor-not-allowed">
                Read Device Info
              </button>
            </div>
            <div class="flex-1 mb-6">
              <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">Output</h2>
              <pre class="output-terminal scrollbar-custom">Connect a device and click 'Read Device Info' to view details.</pre>
            </div>
          </div>
          
          <div data-tab-content="shell" class="tab-content hidden">
            <div class="flex-1 mb-6">
              <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">ADB Shell</h2>
              <div class="glass-effect rounded-lg p-4 mb-4">
                <p class="text-gray-700 dark:text-gray-300 mb-4">Shell functionality coming soon...</p>
                <div class="flex">
                  <input type="text" disabled placeholder="Enter shell command..." class="flex-1 px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-l-lg text-gray-900 dark:text-gray-100">
                  <button disabled class="px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-500 dark:text-gray-400 rounded-r-lg cursor-not-allowed">Execute</button>
                </div>
              </div>
            </div>
          </div>
          
          <div data-tab-content="files" class="tab-content hidden">
            <div class="flex-1 mb-6">
              <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">File Manager</h2>
              <div class="glass-effect rounded-lg p-4 h-48 flex items-center justify-center">
                <p class="text-gray-700 dark:text-gray-300">File manager functionality coming soon...</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="mt-auto">
          <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-3">History</h2>
          <div class="glass-effect rounded-lg p-4 history-panel scrollbar-custom">
            <p class="text-gray-500 dark:text-gray-400">No device info fetched yet.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ÿ™ŸáŸäÿ¶ÿ© Ÿàÿ∂ÿπ ÿßŸÑÿ∏ŸÑÿßŸÖ ÿßŸÅÿ™ÿ±ÿßÿ∂ŸäŸãÿß
    document.body.classList.add('dark');
    
    // ÿπŸÜÿßÿµÿ± DOM
    const themeToggle = document.getElementById('theme-toggle');
    const connectBtn = document.getElementById('connect-btn');
    const connectText = document.getElementById('connect-text');
    const statusIndicator = document.getElementById('status-indicator');
    const statusText = document.getElementById('status-text');
    const errorContainer = document.getElementById('error-container');
    const errorText = document.getElementById('error-text');
    const readInfoBtn = document.getElementById('read-info-btn');
    const outputTerminal = document.querySelector('.output-terminal');
    const historyPanel = document.querySelector('.history-panel');
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');
    
    // ÿ≠ÿßŸÑÿ© ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ
    let deviceStatus = 'Disconnected';
    let adb = null;
    let loading = false;
    let commandHistory = [];
    
    // ÿ™ÿ®ÿØŸäŸÑ Ÿàÿ∂ÿπ ÿßŸÑÿ£ŸÑŸàÿßŸÜ
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('dark');
      themeToggle.textContent = document.body.classList.contains('dark') ? 'üåô' : '‚òÄÔ∏è';
      themeToggle.setAttribute('title', document.body.classList.contains('dark') ? 'Switch to light mode' : 'Switch to dark mode');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });
    
    // ÿ™ÿ®ÿØŸäŸÑ ÿπŸÑÿßŸÖÿßÿ™ ÿßŸÑÿ™ÿ®ŸàŸäÿ®
    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');
        
        // ÿ™ÿ≠ÿØŸäÿØ ÿßŸÑÿ≤ÿ± ÿßŸÑŸÜÿ¥ÿ∑
        tabButtons.forEach(btn => {
          btn.classList.remove('tab-active');
          btn.classList.add('text-gray-500', 'dark:text-gray-400');
        });
        
        button.classList.add('tab-active');
        button.classList.remove('text-gray-500', 'dark:text-gray-400');
        
        // ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®
        tabContents.forEach(content => {
          content.classList.add('hidden');
          content.classList.remove('active');
        });
        
        document.querySelector(`[data-tab-content="${tabId}"]`).classList.remove('hidden');
        document.querySelector(`[data-tab-content="${tabId}"]`).classList.add('active');
      });
    });
    
    // ÿ™ŸàÿµŸäŸÑ ÿßŸÑÿ¨Ÿáÿßÿ≤
    connectBtn.addEventListener('click', async () => {
      if (deviceStatus === 'Connected') return;
      
      setLoading(true);
      clearError();
      
      try {
        connectText.innerHTML = '<div class="loading-spinner"></div>Connecting...';
        
        // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ (ŸÅŸä ÿßŸÑŸàÿßŸÇÿπ ÿ≥ŸäŸÉŸàŸÜ ÿßÿ™ÿµÿßŸÑŸãÿß ÿ≠ŸÇŸäŸÇŸäŸãÿß ÿ®ŸÄ WebADB)
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // ŸÅŸä ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ÿßŸÑÿ≠ŸÇŸäŸÇŸäÿå ÿ≥Ÿäÿ™ŸÖ ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ:
        // const webusb = await Adb.open("WebUSB");
        // adb = await webusb.connectAdb("host::");
        
        // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿßŸÑŸÜÿßÿ¨ÿ≠
        adb = { mock: true, shell: () => {} };
        setDeviceStatus('Connected');
        
        outputTerminal.textContent = "Device connected successfully. Click 'Read Info' to view device details.";
        readInfoBtn.classList.remove('opacity-50', 'cursor-not-allowed');
        
      } catch (err) {
        showError(`Connection failed: ${err.message}. Ensure USB debugging is enabled and device is connected via USB.`);
        setDeviceStatus('Disconnected');
      } finally {
        setLoading(false);
      }
    });
    
    // ŸÇÿ±ÿßÿ°ÿ© ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¨Ÿáÿßÿ≤
    readInfoBtn.addEventListener('click', async () => {
      if (!adb || deviceStatus !== 'Connected') {
        showError("No device connected. Please connect a device first.");
        return;
      }
      
      setLoading(true);
      clearError();
      
      try {
        readInfoBtn.innerHTML = '<div class="loading-spinner"></div>Reading...';
        
        // ŸÖÿ≠ÿßŸÉÿßÿ© ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑÿ¨Ÿáÿßÿ≤
        await new Promise(resolve => setTimeout(resolve, 1000));
        
        // ŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ© ŸÑŸÖÿ≠ÿßŸÉÿßÿ© ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© getprop
        const mockDeviceInfo = `[ro.build.id]: [RP1A.200720.011]
[ro.build.version.incremental]: [210805001]
[ro.build.version.release]: [11]
[ro.build.version.sdk]: [30]
[ro.product.brand]: [google]
[ro.product.model]: [Pixel 4]
[ro.product.name]: [flame]
[ro.product.device]: [flame]
[ro.product.cpu.abi]: [arm64-v8a]
[ro.product.manufacturer]: [Google]`;
        
        outputTerminal.textContent = mockDeviceInfo;
        
        // ÿ•ÿ∂ÿßŸÅÿ© ÿ•ŸÑŸâ ÿßŸÑÿ≥ÿ¨ŸÑ
        addToHistory(mockDeviceInfo);
        
      } catch (err) {
        showError(`Failed to read device info: ${err.message}`);
        outputTerminal.textContent = `Error: ${err.message}`;
      } finally {
        setLoading(false);
        readInfoBtn.textContent = 'Read Device Info';
      }
    });
    
    // Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑŸÖÿ≥ÿßÿπÿØÿ©
    function setDeviceStatus(status) {
      deviceStatus = status;
      statusText.textContent = `Status: ${status}`;
      
      if (status === 'Connected') {
        statusIndicator.classList.remove('bg-red-500');
        statusIndicator.classList.add('bg-green-500');
        statusText.classList.remove('status-disconnected');
        statusText.classList.add('status-connected');
        connectBtn.classList.remove('btn-primary');
        connectBtn.classList.add('btn-success');
        connectText.textContent = 'Connected';
      } else {
        statusIndicator.classList.remove('bg-green-500');
        statusIndicator.classList.add('bg-red-500');
        statusText.classList.remove('status-connected');
        statusText.classList.add('status-disconnected');
        connectBtn.classList.remove('btn-success');
        connectBtn.classList.add('btn-primary');
        connectText.textContent = 'Connect Device';
        readInfoBtn.classList.add('opacity-50', 'cursor-not-allowed');
      }
    }
    
    function setLoading(isLoading) {
      loading = isLoading;
      connectBtn.disabled = isLoading;
      readInfoBtn.disabled = isLoading;
    }
    
    function showError(message) {
      errorText.textContent = message;
      errorContainer.classList.remove('hidden');
    }
    
    function clearError() {
      errorContainer.classList.add('hidden');
    }
    
    function addToHistory(output) {
      const timestamp = new Date().toLocaleTimeString();
      commandHistory.push({ output, timestamp });
      
      if (commandHistory.length > 5) {
        commandHistory.shift();
      }
      
      updateHistoryDisplay();
    }
    
    function updateHistoryDisplay() {
      if (commandHistory.length === 0) {
        historyPanel.innerHTML = '<p class="text-gray-500 dark:text-gray-400">No device info fetched yet.</p>';
        return;
      }
      
      historyPanel.innerHTML = '';
      commandHistory.forEach((entry, index) => {
        const historyItem = document.createElement('div');
        historyItem.className = 'mb-3 p-3 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700';
        historyItem.innerHTML = `
          <div class="flex justify-between items-center mb-1">
            <span class="text-sm font-semibold text-gray-900 dark:text-gray-100">getprop</span>
            <span class="text-xs text-gray-500 dark:text-gray-400">${entry.timestamp}</span>
          </div>
          <pre class="text-xs text-gray-600 dark:text-gray-300 truncate">${entry.output.slice(0, 80)}${entry.output.length > 80 ? '...' : ''}</pre>
        `;
        historyPanel.appendChild(historyItem);
      });
    }
    
    // ÿ™ŸáŸäÿ¶ÿ© ÿßŸÑÿ≥ÿ≠ÿ® ŸÑŸÑÿ•ÿ∑ÿßÿ±
    let offsetX, offsetY, isDragging = false;
    const windowElement = document.querySelector('.window');
    const draggableHeader = document.querySelector('.draggable-header');
    
    draggableHeader.addEventListener('mousedown', (e) => {
      isDragging = true;
      offsetX = e.clientX - windowElement.getBoundingClientRect().left;
      offsetY = e.clientY - windowElement.getBoundingClientRect().top;
      windowElement.style.cursor = 'grabbing';
    });
    
    document.addEventListener('mousemove', (e) => {
      if (!isDragging) return;
      
      const x = e.clientX - offsetX;
      const y = e.clientY - offsetY;
      
      // ÿßŸÑÿ≠ÿØŸàÿØ ŸÑŸÖŸÜÿπ ÿßŸÑŸÜÿßŸÅÿ∞ÿ© ŸÖŸÜ ÿßŸÑÿÆÿ±Ÿàÿ¨ ŸÖŸÜ ÿßŸÑÿ¥ÿßÿ¥ÿ©
      const maxX = window.innerWidth - windowElement.offsetWidth;
      const maxY = window.innerHeight - windowElement.offsetHeight;
      
      windowElement.style.left = `${Math.max(0, Math.min(x, maxX))}px`;
      windowElement.style.top = `${Math.max(0, Math.min(y, maxY))}px`;
      windowElement.style.transform = 'none';
    });
    
    document.addEventListener('mouseup', () => {
      isDragging = false;
      windowElement.style.cursor = 'default';
    });
  </script>
</body>
</html>
